<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>submit - coelostat</title>
</head>
<body>
  <p>submit an infohazard</p>
  <div><textarea id="description" rows="4" cols="50"></textarea></div>
  <div><button id="submit">submit</button></div>
  <p><strong>c</strong>oelostat <strong>i</strong>n<strong>s</strong>titute</p>

  <script>
    document.getElementById('submit').addEventListener('click', function() {
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/submit');
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onload = function() {
        if (xhr.status === 200) {
          alert('submitted');
          window.location.href = '/';
        }
        else alert('error');
      };
      xhr.send(JSON.stringify({
        description: document.getElementById('description').value
      }));
    });
  </script>
</body>
</html>
